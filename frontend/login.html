<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Astrovision - Login</title>

  <!-- Supabase JS Client -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

  <style>
    /* (Your exact CSS unchanged) */
    * {margin:0;padding:0;box-sizing:border-box;}
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: #000000;
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      overflow: hidden;
      position: relative;
    }
    body::before {
      content: '';
      position: fixed;
      top: 0;left: 0;width: 100%;height: 100%;
      background:
        radial-gradient(ellipse at 20% 30%, rgba(80, 80, 80, 0.2) 0%, transparent 50%),
        radial-gradient(ellipse at 80% 70%, rgba(120, 120, 120, 0.2) 0%, transparent 50%),
        radial-gradient(ellipse at 50% 50%, rgba(60, 60, 60, 0.15) 0%, transparent 50%);
      animation: backgroundPulse 15s ease-in-out infinite;
      z-index: 0;
    }
    @keyframes backgroundPulse {0%,100%{opacity:1;}50%{opacity:0.7;}}
    .particles {position:fixed;top:0;left:0;width:100%;height:100%;z-index:1;pointer-events:none;}
    .particle {position:absolute;background:white;border-radius:50%;animation:float linear infinite;}
    @keyframes float {
      0% {transform: translateY(100vh) scale(0); opacity: 0;}
      10% {opacity: 1;}
      90% {opacity: 1;}
      100% {transform: translateY(-100vh) scale(1); opacity: 0;}
    }
    .login-container {
      background: linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 100%);
      padding: 50px 40px;
      border-radius: 20px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.8);
      width: 420px;
      position: relative;
      z-index: 2;
      border: 2px solid transparent;
      transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    }
    .login-container::before {
      content: '';
      position: absolute;
      top: -2px;left: -2px;right: -2px;bottom: -2px;
      background: linear-gradient(135deg, #000000, #404040, #606060, #808080, #000000);
      background-size: 400% 400%;
      border-radius: 20px;
      z-index: -1;
      opacity: 0.5;
      animation: gradientShift 4s ease infinite;
    }
    @keyframes gradientShift {0%,100%{background-position:0% 50%;}50%{background-position:100% 50%;}}
    .login-container:hover {transform: translateY(-5px); box-shadow: 0 30px 80px rgba(100,100,100,0.4);}
    .logo {text-align:center;margin-bottom:30px;}
    .logo h1 {
      font-size:2.5rem;font-weight:800;letter-spacing:3px;text-transform:uppercase;
      background: linear-gradient(90deg,#000 0%,#404040 25%,#808080 50%,#404040 75%,#000 100%);
      background-size:200% 100%;
      -webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;
      animation:textGradientFlow 4s linear infinite;margin-bottom:8px;
    }
    @keyframes textGradientFlow {0%{background-position:0% 50%;}100%{background-position:200% 50%;}}
    .logo p {font-size:0.9rem;background:linear-gradient(90deg,#303030 0%,#606060 25%,#909090 50%,#606060 75%,#303030 100%);
      background-size:200% 100%;
      -webkit-background-clip:text;-webkit-text-fill-color:transparent;
      background-clip:text;animation:textGradientFlow 5s linear infinite;
    }
    h2{text-align:center;color:#c0c0c0;margin-bottom:30px;font-size:1.5rem;font-weight:600;}
    .input-group{margin-bottom:20px;position:relative;}
    .input-group label{display:block;color:#909090;margin-bottom:8px;font-size:0.9rem;font-weight:500;}
    input{
      width:100%;padding:14px 16px;background:rgba(20,20,20,0.8);
      border:1px solid #303030;border-radius:10px;color:#e0e0e0;
      font-size:1rem;transition:all 0.3s ease;outline:none;
    }
    input:focus{border-color:#606060;background:rgba(30,30,30,0.9);box-shadow:0 0 20px rgba(96,96,96,0.2);}
    input::placeholder{color:#505050;}
    button {
      width:100%;padding:14px;margin-top:10px;
      background:linear-gradient(135deg,#808080,#a0a0a0);
      color:#000;border:none;border-radius:10px;font-size:1rem;font-weight:700;
      cursor:pointer;transition:all 0.3s ease;text-transform:uppercase;
      letter-spacing:1px;box-shadow:0 4px 15px rgba(128,128,128,0.3);
    }
    button:hover {background:linear-gradient(135deg,#909090,#b0b0b0);
      transform:translateY(-2px);box-shadow:0 6px 20px rgba(144,144,144,0.4);}
    button:active {transform:translateY(0);}
    .divider{text-align:center;color:#606060;margin:25px 0;position:relative;}
    .divider::before,.divider::after{content:'';position:absolute;top:50%;width:40%;height:1px;
      background:linear-gradient(to right,transparent,#404040,transparent);}
    .divider::before{left:0;} .divider::after{right:0;}
    .google-btn{background:linear-gradient(135deg,#1a1a1a,#2a2a2a);color:#e0e0e0;border:1px solid #404040;
      display:flex;align-items:center;justify-content:center;gap:12px;transition:all 0.3s ease;}
    .google-btn:hover{background:linear-gradient(135deg,#2a2a2a,#3a3a3a);
      border-color:#606060;box-shadow:0 6px 20px rgba(80,80,80,0.3);}
    .google-icon{width:20px;height:20px;background:linear-gradient(135deg,#808080,#a0a0a0);
      border-radius:50%;display:flex;align-items:center;justify-content:center;
      font-weight:bold;font-size:12px;}
    .forgot-password{text-align:right;margin-top:10px;}
    .forgot-password a{color:#909090;text-decoration:none;font-size:0.85rem;transition:color 0.3s ease;}
    .forgot-password a:hover{color:#c0c0c0;}
    .signup-link{text-align:center;margin-top:25px;color:#707070;font-size:0.9rem;}
    .signup-link a{color:#a0a0a0;text-decoration:none;font-weight:600;transition:color 0.3s ease;}
    .signup-link a:hover{color:#c0c0c0;}
    .error-message{background:rgba(255,68,68,0.1);border:1px solid rgba(255,68,68,0.3);
      color:#ff6b6b;padding:12px;border-radius:8px;margin-bottom:20px;font-size:0.9rem;display:none;}
    .success-message{background:rgba(76,175,80,0.1);border:1px solid rgba(76,175,80,0.3);
      color:#81c784;padding:12px;border-radius:8px;margin-bottom:20px;font-size:0.9rem;display:none;}
    .loading{display:none;text-align:center;color:#909090;margin-top:10px;font-size:0.9rem;}
    .loading::after{content:'...';animation:dots 1.5s infinite;}
    @keyframes dots{0%,20%{content:'.';}40%{content:'..';}60%,100%{content:'...';}}
    @media(max-width:480px){.login-container{width:90%;padding:40px 30px;}
      .logo h1{font-size:2rem;}}
  </style>
</head>
<body>

  <div class="particles" id="particles"></div>

  <div class="login-container">
    <div class="logo">
      <h1>ASTROVISION</h1>
      <p>✨ Explore the Cosmos ✨</p>
    </div>

    <h2>Welcome Back</h2>

    <div id="error-message" class="error-message"></div>
    <div id="success-message" class="success-message"></div>

    <form id="loginForm">
      <div class="input-group">
        <label for="email">Email Address</label>
        <input type="email" id="email" placeholder="Enter your email" required>
      </div>

      <div class="input-group">
        <label for="password">Password</label>
        <input type="password" id="password" placeholder="Enter your password" required>
      </div>

      <div class="forgot-password">
        <a href="#" id="forgotPasswordLink">Forgot Password?</a>
      </div>

      <button type="submit" id="loginBtn">Sign In</button>
      <div class="loading" id="loading">Signing in</div>
    </form>

    <div class="divider">OR</div>

    <button class="google-btn" id="googleBtn">
      <div class="google-icon">G</div>
      Continue with Google
    </button>

    <div class="signup-link">
      Don't have an account? <a href="#" id="signupLink">Sign Up</a>
    </div>
  </div>

  <script>
    // ========== SUPABASE CONFIGURATION ==========
     const SUPABASE_URL = "https://yourproject.supabase.co";
    const SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Ind0cWV1dW9zcG90d3JkZXVuamFsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE4OTkxOTksImV4cCI6MjA3NzQ3NTE5OX0.3N4fe4vtytqeThBxC2hrKwxejh-_iI5gVNjPdy6ruvI"; // anon key only

   const supabase = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);


    // ========== PARTICLE BACKGROUND ==========
    const particlesContainer = document.getElementById('particles');
    const particleCount = 30;
    for (let i = 0; i < particleCount; i++) {
      const p = document.createElement('div');
      p.className = 'particle';
      const size = Math.random() * 3 + 1;
      p.style.width = size + 'px';
      p.style.height = size + 'px';
      p.style.left = Math.random() * 100 + '%';
      p.style.animationDuration = (Math.random() * 10 + 10) + 's';
      p.style.animationDelay = Math.random() * 5 + 's';
      p.style.opacity = Math.random() * 0.5 + 0.2;
      particlesContainer.appendChild(p);
    }

    // ========== HELPERS ==========
    const showError = msg => {
      const e = document.getElementById('error-message');
      e.textContent = msg; e.style.display = 'block';
      setTimeout(()=> e.style.display='none',5000);
    };
    const showSuccess = msg => {
      const s = document.getElementById('success-message');
      s.textContent = msg; s.style.display = 'block';
      setTimeout(()=> s.style.display='none',3000);
    };
    const showLoading = s => {
      document.getElementById('loading').style.display = s ? 'block' : 'none';
      document.getElementById('loginBtn').disabled = s;
      document.getElementById('googleBtn').disabled = s;
    };

    // ========== EMAIL LOGIN ==========
    document.getElementById('loginForm').addEventListener('submit', async e => {
      e.preventDefault();
      const email = document.getElementById('email').value.trim();
      const password = document.getElementById('password').value.trim();
      showLoading(true);
      try {
        const { error } = await supabase.auth.signInWithPassword({ email, password });
        if (error) throw error;
        showSuccess('Login successful! Redirecting...');
        setTimeout(()=> window.location.href = 'index.html', 1500);
      } catch (err) {
        console.error(err);
        showError(err.message || 'Invalid credentials.');
      } finally { showLoading(false); }
    });

    // ========== GOOGLE LOGIN ==========
    document.getElementById('googleBtn').addEventListener('click', async ()=>{
      showLoading(true);
      try {
        const { error } = await supabase.auth.signInWithOAuth({
          provider: 'google',
          options: { redirectTo: window.location.origin + '/index.html' }
        });
        if (error) throw error;
      } catch (err) {
        console.error(err);
        showError('Google sign-in failed.');
        showLoading(false);
      }
    });

    // ========== PASSWORD RESET ==========
    document.getElementById('forgotPasswordLink').addEventListener('click', async e=>{
      e.preventDefault();
      const email = document.getElementById('email').value;
      if (!email) return showError('Enter your email first.');
      try {
        const { error } = await supabase.auth.resetPasswordForEmail(email, {
          redirectTo: window.location.origin + '/reset-password.html'
        });
        if (error) throw error;
        showSuccess('Password reset email sent.');
      } catch (err) {
        showError('Failed to send reset email.');
      }
    });

    // ========== SIGNUP REDIRECT ==========
    document.getElementById('signupLink').addEventListener('click', e=>{
      e.preventDefault();
      window.location.href = 'signup.html';
    });

    // ========== AUTO-REDIRECT IF LOGGED IN ==========
    supabase.auth.getSession().then(({ data: { session } })=>{
      if (session) window.location.href = 'index.html';
    });
  </script>
</body>
</html>
